<!doctype html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
    <title>๐ ูุธุงู ุฅุฏุงุฑุฉ ุงูุฏููู ูุงููุงุช ุงููุชูุฏู - ุงูุฅุตุฏุงุฑ ุงููุฏูุฌ</title>
    
    <!-- ุฅุถุงูุฉ Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-database-compat.js"></script>
    
    <!-- ุฅุถุงูุฉ ููุชุจุงุช ุงูุชุตุฏูุฑ -->
    <script src="https://cdn.jsdelivr.net/npm/exceljs/dist/exceljs.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/file-saver@2.0.5/dist/FileSaver.min.js"></script>
    
    <!-- ุฅุถุงูุฉ ุฃููููุงุช -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <!-- ุฅุถุงูุฉ ุฎุทูุท -->
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;800&display=swap" rel="stylesheet">
    
    <!-- ุฑุงุจุท ููู CSS -->
    <link rel="stylesheet" href="style.css">
</head>
<body>

<!-- ุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู -->
<div id="loginPage">
    <div id="loginCard">
        <div style="margin-bottom: 24px;">
            <i class="fas fa-chart-line" style="font-size: 48px; color: var(--primary); margin-bottom: 16px;"></i>
            <h2>๐ ูุธุงู ุฅุฏุงุฑุฉ ุงูุฏููู ูุงููุงุช ุงููุชูุฏู</h2>
            <p style="color: var(--muted); margin-top: 8px;">ุฅุฏุงุฑุฉ ุฐููุฉ ูุณุฑูุนุฉ ูุฏูููู ูุฃุนูุงูู</p>
        </div>
        
        <input id="loginName" type="text" placeholder="๐ค ุงุณู ุงููุณุชุฎุฏู" />
        <input id="loginPassword" type="password" placeholder="๐ ูููุฉ ุงููุฑูุฑ" />
        
        <div class="login-options">
            <button id="btnLogin" class="primary">
                <i class="fas fa-sign-in-alt"></i>
                ุชุณุฌูู ุงูุฏุฎูู
            </button>
            <button id="btnRegister" class="success">
                <i class="fas fa-user-plus"></i>
                ุฅูุดุงุก ุญุณุงุจ
            </button>
        </div>

        <!-- ุฅุถุงูุฉ ุฒุฑ ุชุณุฌูู ุงูุฏุฎูู ุจุญุณุงุจ Google ูู ุงูููุฏ ุงูุฃูู -->
        <div style="display: flex; align-items: center; margin: 20px 0; color: var(--muted);">
            <div style="flex: 1; height: 1px; background: rgba(255,255,255,0.2);"></div>
            <div style="padding: 0 15px; font-size: 14px;">ุฃู</div>
            <div style="flex: 1; height: 1px; background: rgba(255,255,255,0.2);"></div>
        </div>

        <button id="googleSignInBtn" class="ghost" style="width: 100%; border-color: #db4437; color: #db4437;">
            <i class="fab fa-google" style="color: #db4437;"></i>
            ุชุณุฌูู ุงูุฏุฎูู ุจุญุณุงุจ Google
        </button>
        
        <p id="loginMessage" style="color: var(--muted); font-size: 14px; margin-top: 16px;"></p>
        
        <div style="margin-top: 24px; padding-top: 16px; border-top: 1px solid rgba(255,255,255,0.1);">
            <p style="color: var(--muted); font-size: 12px;">
                <i class="fas fa-shield-alt"></i>
                ุจูุงูุงุชู ูุญููุฉ ููุคููุฉ ุจุงููุงูู
            </p>
        </div>
    </div>
</div>

<!-- ุตูุญุฉ ุงูุชุทุจูู ุงูุฑุฆูุณูุฉ -->
<div id="appPage" class="hidden">
    <!-- ุดุฑูุท ุงูุชููู ุงููุญุณู -->
    <div class="nav-container" id="navContainer">
        <div class="nav-header">
            <div class="nav-title">
                <i class="fas fa-chart-line"></i>
                <div class="nav-title-text">
                    <h1>ูุธุงู ุฅุฏุงุฑุฉ ุงูุฏููู ูุงููุงุช</h1>
                    <p id="welcomeText">ูุฑุญุจุงู ุจู</p>
                </div>
            </div>
            
            <div class="nav-controls">
                <div id="currentDateTime"></div>
                <button id="logoutBtn" class="danger small">
                    <i class="fas fa-sign-out-alt"></i>
                    ุฎุฑูุฌ
                </button>
            </div>
        </div>

        <div class="nav-buttons">
            <button id="navDashboard" class="warning">
                <i class="fas fa-tachometer-alt"></i>
                ููุญุฉ ุงูุชุญูู
            </button>
            <button id="navDebts" class="primary">
                <i class="fas fa-hand-holding-usd"></i>
                ุงูุฏููู
            </button>
            <button id="navQat" class="success">
                <i class="fas fa-leaf"></i>
                ุงููุงุช
            </button>
            <button id="navSummary" class="info">
                <i class="fas fa-chart-pie"></i>
                ุงูููุฎุต
            </button>
            <button id="navSettings" class="ghost">
                <i class="fas fa-cog"></i>
                ุงูุฅุนุฏุงุฏุงุช
            </button>
        </div>
    </div>

    <!-- ุตูุญุฉ ููุญุฉ ุงูุชุญูู -->
    <div id="dashboardPage" class="page">
        <div class="card">
            <h2><i class="fas fa-tachometer-alt"></i> ููุญุฉ ุงูุชุญูู ุงูุฑุฆูุณูุฉ</h2>
            <p style="color: var(--muted); margin-bottom: 24px;">ูุธุฑุฉ ุดุงููุฉ ุนูู ุฃุฏุงุก ุฃุนูุงูู</p>
            
            <div class="stats-grid">
                <div class="stat-item">
                    <div class="stat-value" id="dashboardTotalDebts">0</div>
                    <div class="stat-label">ุฅุฌูุงูู ุงูุฏููู</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="dashboardTotalPaid">0</div>
                    <div class="stat-label">ุงููุณุฏุฏ</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="dashboardTotalRemaining">0</div>
                    <div class="stat-label">ุงููุชุจูู</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="dashboardTotalQat">0</div>
                    <div class="stat-label">ุฅุฌูุงูู ุงููุงุช</div>
                </div>
            </div>
        </div>

        <div class="quick-actions">
            <div class="quick-action-btn" id="quickAddDebt">
                <i class="fas fa-plus-circle"></i>
                <div>ุฅุถุงูุฉ ุฏูู</div>
            </div>
            <div class="quick-action-btn" id="quickAddPayment">
                <i class="fas fa-money-bill-wave"></i>
                <div>ุชุณุฏูุฏ ุฏูุนุฉ</div>
            </div>
            <div class="quick-action-btn" id="quickAddQat">
                <i class="fas fa-leaf"></i>
                <div>ุชุณุฌูู ูุงุช</div>
            </div>
            <div class="quick-action-btn" id="quickExport">
                <i class="fas fa-file-export"></i>
                <div>ุชุตุฏูุฑ ุชูุฑูุฑ</div>
            </div>
        </div>

        <div class="card">
            <h3><i class="fas fa-chart-line"></i> ุงูุฏููู ุงูุฃุฎูุฑุฉ</h3>
            <div id="recentDebts"></div>
        </div>

        <div class="card">
            <h3><i class="fas fa-history"></i> ุขุฎุฑ ุงูุชุณุฏูุฏุงุช</h3>
            <div id="recentPayments"></div>
        </div>
    </div>

    <!-- ุตูุญุฉ ุงูุฏููู -->
    <div id="debtsPage" class="page">
        <div class="search-container">
            <input type="text" id="searchDebts" placeholder="๐ ุงุจุญุซ ุจุงูุงุณู ุฃู ุงูุชุงุฑูุฎ... ุซู ุงุถุบุท Enter ููุณุฌู ุงูุชูุตููู" />
            <button id="quickSearchBtn" class="small primary search-btn">
                <i class="fas fa-search"></i>
            </button>
        </div>

        <div class="summary-cards">
            <div class="summary-card total">
                <h3><i class="fas fa-hand-holding-usd"></i> ุฅุฌูุงูู ุงูุฏููู</h3>
                <p id="totalDebts">0 ุฑูุงู</p>
            </div>
            <div class="summary-card paid">
                <h3><i class="fas fa-check-circle"></i> ุงููุณุฏุฏ</h3>
                <p id="totalPaid">0 ุฑูุงู</p>
            </div>
            <div class="summary-card remaining">
                <h3><i class="fas fa-clock"></i> ุงููุชุจูู</h3>
                <p id="totalRemaining">0 ุฑูุงู</p>
            </div>
        </div>

        <div class="card">
            <h3><i class="fas fa-plus-circle"></i> ุชุณุฌูู / ุชุนุฏูู ุงูุฏูู</h3>
            <input id="debtName" type="text" placeholder="๐ค ุงุณู ุงููุชุฏูู" />
            <input id="debtAmount" type="number" placeholder="๐ฐ ุงููุจูุบ ุงูุฅุฌูุงูู" />
            
            <div class="date-selection">
                <input id="debtDate" type="date" />
                <div class="day-selector" id="daySelectorDebt">
                    <button type="button" id="showDaysDebt" class="small ghost">
                        <i class="fas fa-calendar-alt"></i>
                        ุงุฎุชุฑ ุงูููู
                    </button>
                    <div class="days-dropdown" id="daysDropdownDebt"></div>
                </div>
                <button id="setTodayDebt" class="small ghost">
                    <i class="fas fa-calendar-day"></i>
                    ุงูููู
                </button>
                <button id="setYesterdayDebt" class="small ghost">
                    <i class="fas fa-calendar-minus"></i>
                    ุฃูุณ
                </button>
            </div>
            
            <select id="debtTime">
                <option value="ุตุจุงุญุงู">๐ ุตุจุงุญุงู</option>
                <option value="ูุณุงุกู">๐ ูุณุงุกู</option>
            </select>
            
            <div style="display: flex; gap: 12px; margin-top: 16px;">
                <button id="saveDebt" class="primary" style="flex: 2;">
                    <i class="fas fa-save"></i>
                    ุญูุธ ุงูุฏูู
                </button>
                <button id="clearDebt" class="ghost" style="flex: 1;">
                    <i class="fas fa-broom"></i>
                    ุชูุฑูุบ
                </button>
            </div>
        </div>

        <div class="card">
            <h3><i class="fas fa-money-bill-wave"></i> ุชุณุฏูุฏ ุฏูุนุฉ</h3>
            <select id="debtorSelect">
                <option value="">๐ค ุงุฎุชุฑ ุงููุชุฏูู</option>
            </select>
            <input id="paymentAmount" type="number" placeholder="๐ฐ ูุจูุบ ุงูุชุณุฏูุฏ" />
            
            <div class="date-selection">
                <input id="paymentDate" type="date" />
                <div class="day-selector" id="daySelectorPayment">
                    <button type="button" id="showDaysPayment" class="small ghost">
                        <i class="fas fa-calendar-alt"></i>
                        ุงุฎุชุฑ ุงูููู
                    </button>
                    <div class="days-dropdown" id="daysDropdownPayment"></div>
                </div>
                <button id="setTodayPayment" class="small ghost">
                    <i class="fas fa-calendar-day"></i>
                    ุงูููู
                </button>
                <button id="setYesterdayPayment" class="small ghost">
                    <i class="fas fa-calendar-minus"></i>
                    ุฃูุณ
                </button>
            </div>
            
            <button id="savePayment" class="success">
                <i class="fas fa-check-circle"></i>
                ุชุณุฌูู ุงูุชุณุฏูุฏ
            </button>
        </div>

        <div class="card">
            <h3><i class="fas fa-list"></i> ูุงุฆูุฉ ุงูุฏููู</h3>
            <div id="debtsList"></div>
        </div>

        <!-- ูุณู ุณุฌู ุงูุฏูู ุงูุชูุตููู -->
        <div class="card debt-history hidden" id="debtHistoryCard">
            <h3><i class="fas fa-history"></i> ุณุฌู ุงูุฏูู ุงูุชูุตููู</h3>
            <div class="export-buttons">
                <button id="exportExcel" class="primary">
                    <i class="fas fa-file-excel"></i>
                    ุชุตุฏูุฑ Excel
                </button>
                <button id="exportWord" class="success">
                    <i class="fas fa-file-word"></i>
                    ุชุตุฏูุฑ Word
                </button>
            </div>
            <div id="debtHistoryList"></div>
        </div>
    </div>

    <!-- ุตูุญุฉ ุงููุงุช -->
    <div id="qatPage" class="page">
        <div class="search-container">
            <input type="text" id="searchQat" placeholder="๐ ุงุจุญุซ ูู ุงููุงุช..." />
        </div>

        <div class="card">
            <h3><i class="fas fa-leaf"></i> ุชุณุฌูู ุงููุงุช ุงููููู</h3>
            <input id="qatType" type="text" placeholder="๐ฟ ููุน ุงููุงุช" />
            <input id="qatCountInput" type="number" placeholder="๐ข ุงูุนุฏุฏ" />
            
            <div class="date-selection">
                <input id="qatDate" type="date" />
                <div class="day-selector" id="daySelectorQat">
                    <button type="button" id="showDaysQat" class="small ghost">
                        <i class="fas fa-calendar-alt"></i>
                        ุงุฎุชุฑ ุงูููู
                    </button>
                    <div class="days-dropdown" id="daysDropdownQat"></div>
                </div>
                <button id="setTodayQat" class="small ghost">
                    <i class="fas fa-calendar-day"></i>
                    ุงูููู
                </button>
                <button id="setYesterdayQat" class="small ghost">
                    <i class="fas fa-calendar-minus"></i>
                    ุฃูุณ
                </button>
            </div>
            
            <div style="display: flex; gap: 12px; margin-top: 16px;">
                <button id="saveQat" class="primary" style="flex: 2;">
                    <i class="fas fa-save"></i>
                    ุญูุธ
                </button>
                <button id="clearQat" class="ghost" style="flex: 1;">
                    <i class="fas fa-broom"></i>
                    ุชูุฑูุบ
                </button>
            </div>
        </div>

        <div class="card">
            <h3><i class="fas fa-history"></i> ุณุฌู ุงููุงุช</h3>
            <div id="qatList"></div>
        </div>
    </div>

    <!-- ุตูุญุฉ ุงูููุฎุต -->
    <div id="summaryPage" class="page">
        <div class="card">
            <h3><i class="fas fa-chart-pie"></i> ููุฎุต ุงูุฏููู ุงูุชูุตููู</h3>
            <div class="export-buttons">
                <button id="exportSummaryExcel" class="primary">
                    <i class="fas fa-file-excel"></i>
                    ุชุตุฏูุฑ Excel
                </button>
                <button id="exportSummaryWord" class="success">
                    <i class="fas fa-file-word"></i>
                    ุชุตุฏูุฑ Word
                </button>
            </div>
            <div id="debtsSummary"></div>
        </div>
    </div>

    <!-- ุตูุญุฉ ุงูุฅุนุฏุงุฏุงุช -->
    <div id="settingsPage" class="page">
        <div class="card">
            <h3><i class="fas fa-cog"></i> ุงูุฅุนุฏุงุฏุงุช ูุงูุฅุฏุงุฑุฉ</h3>
            
            <div class="management-buttons">
                <button id="changePassword" class="warning">
                    <i class="fas fa-key"></i>
                    ุชุบููุฑ ูููุฉ ุงููุฑูุฑ
                </button>
                <button id="deleteData" class="danger">
                    <i class="fas fa-trash"></i>
                    ุญุฐู ุฌููุน ุงูุจูุงูุงุช
                </button>
                <button id="exportAllData" class="primary">
                    <i class="fas fa-download"></i>
                    ูุณุฎ ุงุญุชูุงุทู
                </button>
                <button id="importData" class="success">
                    <i class="fas fa-upload"></i>
                    ุงุณุชุนุงุฏุฉ ุงูุจูุงูุงุช
                </button>
            </div>
        </div>

        <div class="card">
            <h3><i class="fas fa-chart-bar"></i> ุฅุญุตุงุฆูุงุช ุงููุธุงู</h3>
            <div class="stats-grid">
                <div class="stat-item">
                    <div class="stat-value" id="statsTotalDebts">0</div>
                    <div class="stat-label">ุฅุฌูุงูู ุงูุฏููู</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="statsTotalRecords">0</div>
                    <div class="stat-label">ุฅุฌูุงูู ุงูุณุฌูุงุช</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="statsActiveDebts">0</div>
                    <div class="stat-label">ุงูุฏููู ุงููุดุทุฉ</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="statsQatRecords">0</div>
                    <div class="stat-label">ุณุฌูุงุช ุงููุงุช</div>
                </div>
            </div>
            <div id="backupStatus" style="font-size: 10px; color: var(--muted); margin-top: 5px; text-align: center;"></div>
        </div>
    </div>
</div>

<!-- ุญุงูุฉ ุงููุฒุงููุฉ -->
<div id="syncStatus" class="sync-status hidden">
    <span id="syncIcon">โป</span>
    <span id="syncText">ุฌุงุฑู ุงููุฒุงููุฉ...</span>
</div>

<!-- ูุงูุฐุฉ ุชุบููุฑ ูููุฉ ุงููุฑูุฑ -->
<div id="changePasswordModal" class="modal hidden">
    <div class="modal-content">
        <h3 style="margin-bottom:24px;display:flex;align-items:center;gap:12px;">
            <i class="fas fa-key"></i>
            ุชุบููุฑ ูููุฉ ุงููุฑูุฑ
        </h3>
        
        <input type="password" id="currentPassword" placeholder="๐ ูููุฉ ุงููุฑูุฑ ุงูุญุงููุฉ" />
        <input type="password" id="newPassword" placeholder="๐ ูููุฉ ุงููุฑูุฑ ุงูุฌุฏูุฏุฉ" />
        <input type="password" id="confirmPassword" placeholder="โ ุชุฃููุฏ ูููุฉ ุงููุฑูุฑ" />
        
        <div style="display:flex;gap:12px;margin-top:24px;">
            <button id="saveNewPassword" class="primary" style="flex:2;">ุญูุธ</button>
            <button id="cancelChangePassword" class="ghost" style="flex:1;">ุฅูุบุงุก</button>
        </div>
    </div>
</div>

<!-- ุฑุงุจุท ููู JavaScript -->
<script src="script.js"></script>
</body>
</html>